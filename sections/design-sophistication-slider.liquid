{% schema %}
    {
      "name": "Text + Product Slider",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Section Title",
          "default": "Design That Speaks Sophistication. Comfort That Feels Like Home."
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Section Description",
          "default": "In every space, contrast creates harmonyâ€”coarse weaves, graceful lines, and light that whispers through the room."
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button Text",
          "default": "Shop Now"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button Link"
        },
        {
          "type": "product_list",
          "id": "products",
          "label": "Select Products"
        }
      ]
    }
    {% endschema %}
    
    <section class="text-product-slider">
      <div class="container">
        <div class="text-content">
          <h2>{{ section.settings.title }}</h2>
          <p>{{ section.settings.description }}</p>
          {% if section.settings.button_text != blank and section.settings.button_link != blank %}
            <a href="{{ section.settings.button_link }}" class="btn">
              {{ section.settings.button_text }}
            </a>
          {% endif %}
        </div>
    
        <div class="swiper product-swiper">
          <div class="swiper-wrapper">
            {% for product in section.settings.products %}
              {% assign product_obj = all_products[product] %}
              <div class="swiper-slide">
                <a href="{{ product_obj.url }}">
                  <img src="{{ product_obj.featured_image | img_url: '400x' }}" alt="{{ product_obj.title }}">
                  <h4>{{ product_obj.title }}</h4>
                  <p>{{ product_obj.price | money }}</p>
                </a>
              </div>
            {% endfor %}
          </div>
    
          <!-- Swiper controls -->
          <div class="swiper-button-next"></div>
          <div class="swiper-button-prev"></div>
        </div>
      </div>
    </section>
    
    <style>
    .text-product-slider .container {
      display: flex;
      gap: 2rem;
      align-items: center;
    }
    
    .text-product-slider .text-content {
      flex: 1;
    }
    
    .text-product-slider .btn {
      display: inline-block;
      background: black;
      color: white;
      padding: 0.8rem 1.5rem;
      text-decoration: none;
    }
    
    .text-product-slider .swiper {
      flex: 1;
    }
    
    .swiper-slide {
      text-align: center;
    }
    
    @media (max-width: 768px) {
      .text-product-slider .container {
        flex-direction: column;
      }
    }
    </style>
    
    <script>
    document.addEventListener('DOMContentLoaded', function () {
      new Swiper('.product-swiper', {
        slidesPerView: 1,
        spaceBetween: 20,
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev',
        },
        breakpoints: {
          768: {
            slidesPerView: 3
          }
        }
      });
    });
    </script>
    