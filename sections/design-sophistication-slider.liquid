<section class="design-sophistication-section">
  <div class="group-parent">
    
    <!-- Left Text Content -->
    <div class="design-that-speaks-sophisticat-parent">
      {% if section.settings.title != blank %}
        <div class="design-that-speaks">{{ section.settings.title }}</div>
      {% endif %}
      
      {% if section.settings.description != blank %}
        <div class="in-every-space">{{ section.settings.description }}</div>
      {% endif %}
      
      {% if section.settings.button_text != blank and section.settings.button_url != blank %}
        <div class="shop-now-parent">
          <a href="{{ section.settings.button_url }}" class="shop-now">{{ section.settings.button_text }}</a>
          <svg class="mingcuteleft-line-icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>
          </svg>
        </div>
      {% endif %}
    </div>
    
    <!-- Right Product Slider -->
    <div class="group-wrapper">
      <div class="group-container">
        <div class="products-swiper">
          <div class="swiper-container">
            <div class="swiper-wrapper">
              {% for block in section.blocks %}
                {% if block.settings.product != blank %}
                  <div class="product-slide swiper-slide" {{ block.shopify_attributes }}>
                    <div class="img-product-parent">
                      <a href="{{ block.settings.product.url }}" class="product-link">
                        
                        <!-- Product Image -->
                        {% if block.settings.product.featured_image %}
                          <img 
                            class="img-product-icon" 
                            src="{{ block.settings.product.featured_image | image_url: width: 450 }}" 
                            alt="{{ block.settings.product.featured_image.alt | default: block.settings.product.title }}"
                            loading="lazy"
                          >
                        {% else %}
                          <div class="img-product-icon no-image">
                            <svg width="60" height="60" viewBox="0 0 24 24" fill="#ccc">
                              <path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
                            </svg>
                          </div>
                        {% endif %}
                        
                        <!-- Product Info -->
                        <div class="group-div">
                          <!-- Star Rating -->
                          <svg class="group-child" viewBox="0 0 120 32" fill="none">
                            {% assign rating = block.settings.rating | default: 4 %}
                            {% for i in (1..5) %}
                              {% assign x_pos = i | minus: 1 | times: 24 %}
                              {% if i <= rating %}
                                <path d="M{{ x_pos | plus: 12 }} 2L{{ x_pos | plus: 15 }} 10L{{ x_pos | plus: 23 }} 10L{{ x_pos | plus: 17 }} 16L{{ x_pos | plus: 19 }} 24L{{ x_pos | plus: 12 }} 19L{{ x_pos | plus: 5 }} 24L{{ x_pos | plus: 7 }} 16L{{ x_pos | plus: 1 }} 10L{{ x_pos | plus: 9 }} 10Z" fill="#ffd700"/>
                              {% else %}
                                <path d="M{{ x_pos | plus: 12 }} 2L{{ x_pos | plus: 15 }} 10L{{ x_pos | plus: 23 }} 10L{{ x_pos | plus: 17 }} 16L{{ x_pos | plus: 19 }} 24L{{ x_pos | plus: 12 }} 19L{{ x_pos | plus: 5 }} 24L{{ x_pos | plus: 7 }} 16L{{ x_pos | plus: 1 }} 10L{{ x_pos | plus: 9 }} 10Z" fill="#e0e0e0"/>
                              {% endif %}
                            {% endfor %}
                          </svg>
                          
                          <div class="woodworm-premium-furniture">{{ block.settings.product.title }}</div>
                          <div class="from-3000">From ₹{{ block.settings.product.price | money_without_currency }}</div>
                        </div>
                      </a>
                    </div>
                  </div>
                {% endif %}
              {% endfor %}
            </div>
            
            <!-- Navigation Arrows -->
            <div class="swiper-button-next"></div>
            <div class="swiper-button-prev"></div>
          </div>
        </div>
      </div>
    </div>
    
  </div>
</section>

<style>
.design-sophistication-section {
  padding: {{ section.settings.section_padding_top }}px 0 {{ section.settings.section_padding_bottom }}px;
  background-color: {{ section.settings.background_color }};
  font-family: 'Futura', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
}

/* Main Container */
.group-parent {
  width: 100%;
  position: relative;
  height: 653px;
  text-align: left;
  font-size: 20px;
  color: #333;
  max-width: {{ section.settings.container_width }}px;
  margin: 0 auto;
}

/* Left Text Content */
.design-that-speaks-sophisticat-parent {
  position: absolute;
  width: calc(100% - 1130px);
  top: 122px;
  right: 1130px;
  left: 0px;
  height: 199.3px;
}

.design-that-speaks {
  position: absolute;
  width: 100%;
  top: 0px;
  left: 0px;
  font-size: {{ section.settings.title_size }}px;
  font-weight: {{ section.settings.title_weight }};
  color: {{ section.settings.title_color }};
  display: inline-block;
  height: 83px;
  line-height: 1.2;
}

.in-every-space {
  position: absolute;
  width: 100%;
  top: 104.33px;
  left: 0px;
  font-weight: {{ section.settings.description_weight | default: 400 }};
  font-size: {{ section.settings.description_size }}px;
  color: {{ section.settings.description_color }};
  display: inline-block;
  height: 39.9px;
  line-height: {{ section.settings.description_line_height }};
}

.shop-now-parent {
  position: absolute;
  width: calc(100% - 420px);
  top: 174.29px;
  right: 419px;
  left: 1px;
  height: 25px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.shop-now {
  font-weight: {{ section.settings.button_font_weight }};
  font-size: {{ section.settings.button_font_size }}px;
  color: {{ section.settings.button_text_color }};
  text-decoration: none;
  transition: color 0.3s ease;
  {% if section.settings.button_uppercase %}text-transform: uppercase;{% endif %}
}

.shop-now:hover {
  color: {{ section.settings.button_hover_text_color }};
}

.mingcuteleft-line-icon {
  width: 24px;
  height: 24px;
  color: {{ section.settings.button_text_color }};
  transition: all 0.3s ease;
}

.shop-now-parent:hover .mingcuteleft-line-icon {
  color: {{ section.settings.button_hover_text_color }};
  transform: translateX(4px);
}

/* Right Product Slider */
.group-wrapper {
  position: absolute;
  top: 0px;
  left: 612px;
  width: calc(100% - 612px);
  height: 653px;
  overflow: hidden;
}

.group-container {
  position: relative;
  width: 100%;
  height: 659px;
}

.products-swiper {
  width: 100%;
  height: 100%;
}

.swiper-container {
  width: 100%;
  height: 100%;
  overflow: visible;
}

.product-slide {
  width: 450px;
  height: auto;
}

/* Product Cards */
.img-product-parent {
  position: relative;
  width: 450px;
  height: 658px;
}

.product-link {
  display: block;
  text-decoration: none;
  color: inherit;
  width: 100%;
  height: 100%;
}

.img-product-icon {
  position: absolute;
  width: 100%;
  top: 0px;
  right: 0px;
  left: 0px;
  max-width: 100%;
  overflow: hidden;
  height: 544px;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.img-product-icon.no-image {
  background: #f8f8f8;
  display: flex;
  align-items: center;
  justify-content: center;
}

.img-product-parent:hover .img-product-icon {
  transform: scale({{ section.settings.image_hover_scale | divided_by: 100.0 }});
}

/* Product Info */
.group-div {
  position: absolute;
  height: 12.77%;
  width: 99.89%;
  top: 87.23%;
  right: 0.11%;
  bottom: 0%;
  left: 0%;
}

.group-child {
  position: absolute;
  height: 25.48%;
  width: 21.78%;
  top: 74.56%;
  right: 78.22%;
  bottom: -0.04%;
  left: 0%;
  max-width: 100%;
  overflow: hidden;
  max-height: 100%;
}

.woodworm-premium-furniture {
  position: absolute;
  top: 0px;
  left: 0px;
  font-weight: {{ section.settings.product_title_weight }};
  font-size: {{ section.settings.product_title_size }}px;
  color: {{ section.settings.product_title_color }};
  display: inline-block;
  width: 299.7px;
  height: 43.8px;
  line-height: 1.3;
  overflow: hidden;
}

.from-3000 {
  position: absolute;
  top: 0.48px;
  left: 348.63px;
  font-weight: {{ section.settings.current_price_weight }};
  font-size: {{ section.settings.current_price_size }}px;
  color: {{ section.settings.current_price_color }};
  display: inline-block;
  width: 100.9px;
  height: 21.9px;
}

/* Swiper Navigation */
.swiper-button-next,
.swiper-button-prev {
  width: {{ section.settings.arrow_size }}px;
  height: {{ section.settings.arrow_size }}px;
  background: {{ section.settings.arrow_background }};
  border-radius: 50%;
  border: {{ section.settings.arrow_border_width }}px solid {{ section.settings.arrow_border_color }};
  color: {{ section.settings.arrow_color }};
  transition: all 0.3s ease;
  {% if section.settings.arrow_shadow %}
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
  {% endif %}
  top: auto;
  bottom: 20px;
  margin-top: 0;
}

.swiper-button-prev {
  left: 20px;
  right: auto;
}

.swiper-button-next {
  left: 80px;
  right: auto;
}

.swiper-button-next:hover,
.swiper-button-prev:hover {
  background: {{ section.settings.arrow_hover_background }};
  color: {{ section.settings.arrow_hover_color }};
  border-color: {{ section.settings.arrow_hover_border_color }};
  transform: scale(1.1);
}

.swiper-button-next:after,
.swiper-button-prev:after {
  font-size: {{ section.settings.arrow_icon_size }}px;
  font-weight: bold;
}

{% unless section.settings.show_arrows %}
.swiper-button-next,
.swiper-button-prev {
  display: none;
}
{% endunless %}

/* Mobile Responsive */
@media (max-width: {{ section.settings.mobile_breakpoint }}px) {
  .group-parent {
    height: auto;
    padding: 20px;
  }
  
  .design-that-speaks-sophisticat-parent {
    position: static;
    width: 100%;
    height: auto;
    margin-bottom: 40px;
    order: {{ section.settings.mobile_text_order }};
  }
  
  .design-that-speaks {
    position: static;
    height: auto;
    font-size: {{ section.settings.mobile_title_size }}px;
    margin-bottom: 20px;
  }
  
  .in-every-space {
    position: static;
    height: auto;
    font-size: {{ section.settings.mobile_description_size }}px;
    margin-bottom: 20px;
  }
  
  .shop-now-parent {
    position: static;
    width: auto;
    height: auto;
  }
  
  .group-wrapper {
    position: static;
    left: 0;
    width: 100%;
    height: 400px;
    order: {{ section.settings.mobile_slider_order }};
  }
  
  .img-product-parent {
    width: 300px;
    height: 400px;
  }
  
  .img-product-icon {
    height: 320px;
  }
  
  .group-div {
    top: 80%;
  }
  
  .woodworm-premium-furniture {
    width: 200px;
    font-size: {{ section.settings.mobile_product_title_size | default: 14 }}px;
  }
  
  .from-3000 {
    left: 220px;
    font-size: {{ section.settings.mobile_price_size | default: 12 }}px;
  }
}

@media (max-width: 480px) {
  .design-sophistication-section {
    padding: 20px 0;
  }
  
  .group-parent {
    padding: 15px;
  }
  
  .img-product-parent {
    width: 250px;
    height: 350px;
  }
  
  .img-product-icon {
    height: 280px;
  }
  
  .woodworm-premium-furniture {
    width: 150px;
    font-size: 12px;
  }
  
  .from-3000 {
    left: 160px;
    font-size: 11px;
  }
}

/* Custom font loading */
@import url('https://fonts.googleapis.com/css2?family=Futura:wght@400;500;600;700&display=swap');
</style>

<script>
// Initialize Swiper
function initializeProductSwiper() {
  console.log('Initializing Product Swiper...');
  
  if (typeof Swiper !== 'undefined') {
    try {
      const swiper = new Swiper('.products-swiper .swiper-container', {
        slidesPerView: 'auto',
        spaceBetween: {{ section.settings.slide_spacing }},
        navigation: {
          nextEl: '.swiper-button-next',
          prevEl: '.swiper-button-prev',
        },
        loop: {{ section.settings.infinite_loop }},
        autoplay: {% if section.settings.autoplay %}
        {
          delay: {{ section.settings.autoplay_delay | times: 1000 }},
          disableOnInteraction: {{ section.settings.pause_on_interaction }},
          pauseOnMouseEnter: {{ section.settings.pause_on_hover }}
        }
        {% else %}false{% endif %},
        speed: {{ section.settings.transition_speed }},
        effect: '{{ section.settings.transition_effect }}',
        freeMode: true,
        centeredSlides: false,
        breakpoints: {
          320: {
            slidesPerView: 1.2,
            spaceBetween: 15
          },
          768: {
            slidesPerView: 'auto',
            spaceBetween: {{ section.settings.slide_spacing }}
          }
        },
        on: {
          init: function() {
            console.log('Product Swiper initialized successfully!');
          }
        }
      });
    } catch (error) {
      console.error('Error initializing Product Swiper:', error);
    }
  } else {
    console.error('Swiper library not loaded! Retrying...');
    setTimeout(initializeProductSwiper, 500);
  }
}

// Initialize when DOM is ready
document.addEventListener('DOMContentLoaded', initializeProductSwiper);

// Fallback initialization
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initializeProductSwiper);
} else {
  setTimeout(initializeProductSwiper, 100);
}

// Shopify theme editor support
if (window.Shopify && window.Shopify.designMode) {
  document.addEventListener('shopify:section:load', function(event) {
    setTimeout(initializeProductSwiper, 200);
  });
}
</script>

{% schema %}
{
  "name": "Sophistication Slider",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "🎛️ Layout Settings"
    },
    {
      "type": "range",
      "id": "container_width",
      "label": "Container Max Width (px)",
      "min": 1000,
      "max": 1600,
      "step": 50,
      "default": 1200
    },
    {
      "type": "range",
      "id": "section_padding_top",
      "label": "Section Padding Top (px)",
      "min": 0,
      "max": 120,
      "step": 10,
      "default": 80
    },
    {
      "type": "range",
      "id": "section_padding_bottom",
      "label": "Section Padding Bottom (px)",
      "min": 0,
      "max": 120,
      "step": 10,
      "default": 80
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "📝 Text Content"
    },
    {
      "type": "textarea",
      "id": "title",
      "label": "Title",
      "default": "Design That Speaks Sophistication. Comfort That Feels Like Home."
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "In every space, contrast creates harmony—coarse weaves, graceful lines, and light that whispers through the room."
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Shop Now"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button URL"
    },
    {
      "type": "header",
      "content": "🎨 Title Styling"
    },
    {
      "type": "range",
      "id": "title_size",
      "label": "Title Font Size (px)",
      "min": 24,
      "max": 60,
      "step": 2,
      "default": 36
    },
    {
      "type": "select",
      "id": "title_weight",
      "label": "Title Font Weight",
      "options": [
        {"value": "400", "label": "Normal"},
        {"value": "500", "label": "Medium"},
        {"value": "600", "label": "Semi Bold"},
        {"value": "700", "label": "Bold"}
      ],
      "default": "500"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title Color",
      "default": "#333333"
    },
    {
      "type": "header",
      "content": "📄 Description & Button"
    },
    {
      "type": "range",
      "id": "description_size",
      "label": "Description Font Size (px)",
      "min": 14,
      "max": 24,
      "step": 1,
      "default": 18
    },
    {
      "type": "range",
      "id": "description_line_height",
      "label": "Description Line Height",
      "min": 1.3,
      "max": 2.0,
      "step": 0.1,
      "default": 1.5
    },
    {
      "type": "color",
      "id": "description_color",
      "label": "Description Color",
      "default": "#333333"
    },
    {
      "type": "range",
      "id": "button_font_size",
      "label": "Button Font Size (px)",
      "min": 12,
      "max": 20,
      "step": 1,
      "default": 16
    },
    {
      "type": "select",
      "id": "button_font_weight",
      "label": "Button Font Weight",
      "options": [
        {"value": "400", "label": "Normal"},
        {"value": "500", "label": "Medium"},
        {"value": "600", "label": "Semi Bold"}
      ],
      "default": "500"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button Text Color",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "button_hover_text_color",
      "label": "Button Hover Text Color",
      "default": "#000000"
    },
    {
      "type": "checkbox",
      "id": "button_uppercase",
      "label": "Button Uppercase",
      "default": false
    },
    {
      "type": "header",
      "content": "🛍️ Product Styling"
    },
    {
      "type": "range",
      "id": "image_hover_scale",
      "label": "Image Hover Scale (%)",
      "min": 100,
      "max": 120,
      "step": 5,
      "default": 105
    },
    {
      "type": "range",
      "id": "product_title_size",
      "label": "Product Title Size (px)",
      "min": 14,
      "max": 24,
      "step": 1,
      "default": 18
    },
    {
      "type": "select",
      "id": "product_title_weight",
      "label": "Product Title Weight",
      "options": [
        {"value": "400", "label": "Normal"},
        {"value": "500", "label": "Medium"},
        {"value": "600", "label": "Semi Bold"}
      ],
      "default": "500"
    },
    {
      "type": "color",
      "id": "product_title_color",
      "label": "Product Title Color",
      "default": "#333333"
    },
    {
      "type": "range",
      "id": "current_price_size",
      "label": "Price Font Size (px)",
      "min": 12,
      "max": 20,
      "step": 1,
      "default": 16
    },
    {
      "type": "select",
      "id": "current_price_weight",
      "label": "Price Font Weight",
      "options": [
        {"value": "400", "label": "Normal"},
        {"value": "500", "label": "Medium"},
        {"value": "600", "label": "Semi Bold"}
      ],
      "default": "500"
    },
    {
      "type": "color",
      "id": "current_price_color",
      "label": "Price Color",
      "default": "#333333"
    },
    {
      "type": "header",
      "content": "🎠 Slider Settings"
    },
    {
      "type": "range",
      "id": "slide_spacing",
      "label": "Slide Spacing (px)",
      "min": 10,
      "max": 50,
      "step": 5,
      "default": 30
    },
    {
      "type": "checkbox",
      "id": "infinite_loop",
      "label": "Infinite Loop",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "Enable Autoplay",
      "default": false
    },
    {
      "type": "range",
      "id": "autoplay_delay",
      "label": "Autoplay Delay (seconds)",
      "min": 2,
      "max": 10,
      "step": 1,
      "default": 4
    },
    {
      "type": "checkbox",
      "id": "pause_on_hover",
      "label": "Pause on Hover",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "pause_on_interaction",
      "label": "Pause on Interaction",
      "default": false
    },
    {
      "type": "range",
      "id": "transition_speed",
      "label": "Transition Speed (ms)",
      "min": 200,
      "max": 1000,
      "step": 100,
      "default": 500
    },
    {
      "type": "select",
      "id": "transition_effect",
      "label": "Transition Effect",
      "options": [
        {"value": "slide", "label": "Slide"},
        {"value": "fade", "label": "Fade"}
      ],
      "default": "slide"
    },
    {
      "type": "header",
      "content": "🏹 Navigation Arrows"
    },
    {
      "type": "checkbox",
      "id": "show_arrows",
      "label": "Show Navigation Arrows",
      "default": true
    },
    {
      "type": "range",
      "id": "arrow_size",
      "label": "Arrow Size (px)",
      "min": 30,
      "max": 60,
      "step": 5,
      "default": 45
    },
    {
      "type": "range",
      "id": "arrow_icon_size",
      "label": "Arrow Icon Size (px)",
      "min": 12,
      "max": 24,
      "step": 2,
      "default": 18
    },
    {
      "type": "range",
      "id": "arrow_border_width",
      "label": "Arrow Border Width (px)",
      "min": 0,
      "max": 3,
      "step": 1,
      "default": 1
    },
    {
      "type": "color",
      "id": "arrow_background",
      "label": "Arrow Background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "arrow_color",
      "label": "Arrow Color",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "arrow_border_color",
      "label": "Arrow Border Color",
      "default": "#e0e0e0"
    },
    {
      "type": "color",
      "id": "arrow_hover_background",
      "label": "Arrow Hover Background",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "arrow_hover_color",
      "label": "Arrow Hover Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "arrow_hover_border_color",
      "label": "Arrow Hover Border Color",
      "default": "#333333"
    },
    {
      "type": "checkbox",
      "id": "arrow_shadow",
      "label": "Arrow Shadow",
      "default": true
    },
    {
      "type": "header",
      "content": "📱 Mobile Settings"
    },
    {
      "type": "range",
      "id": "mobile_breakpoint",
      "label": "Mobile Breakpoint (px)",
      "min": 600,
      "max": 1000,
      "step": 50,
      "default": 750
    },
    {
      "type": "select",
      "id": "mobile_text_order",
      "label": "Mobile Text Order",
      "options": [
        {"value": "1", "label": "Text First"},
        {"value": "2", "label": "Text Second"}
      ],
      "default": "1"
    },
    {
      "type": "select",
      "id": "mobile_slider_order",
      "label": "Mobile Slider Order",
      "options": [
        {"value": "1", "label": "Slider First"},
        {"value": "2", "label": "Slider Second"}
      ],
      "default": "2"
    },
    {
      "type": "range",
      "id": "mobile_title_size",
      "label": "Mobile Title Size (px)",
      "min": 20,
      "max": 40,
      "step": 2,
      "default": 28
    },
    {
      "type": "range",
      "id": "mobile_description_size",
      "label": "Mobile Description Size (px)",
      "min": 14,
      "max": 20,
      "step": 1,
      "default": 16
    }
  ],
  "blocks": [
    {
      "type": "product",
      "name": "Product",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "Select Product"
        },
        {
          "type": "range",
          "id": "rating",
          "label": "Star Rating (1-5)",
          "min": 1,
          "max": 5,
          "step": 1,
          "default": 4,
          "info": "Manual star rating display"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Design Sophistication Slider",
      "blocks": [
        {
          "type": "product"
        },
        {
          "type": "product"
        },
        {
          "type": "product"
        },
        {
          "type": "product"
        }
      ]
    }
  ]
}
{% endschema %}